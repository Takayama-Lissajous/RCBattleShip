Programmer's View of Cpia2
Cpia2의 프로그래머 관점
 
Cpia2 is the second generation video coprocessor from VLSI Vision Ltd (now a division of ST Microelectronics).  There are two versions.  The first is the STV0672, which is capable of up to 30 frames per second (fps) in frame sizes up to CIF, and 15 fps for VGA frames.  The STV0676 is an improved version, which can handle up to 30 fps VGA.  Both coprocessors can be attached to two CMOS sensors - the vvl6410 CIF sensor and the vvl6500 VGA sensor.  These will be referred to as the 410 and the 500 sensors, or the CIF and VGA sensors.
Cpia2는 VLSI Vision Ltd (현 ST Microelectronics 사업부)의 2 세대 비디오 코-프로세서입니다. 두 가지 버전이 있습니다. 첫 번째는 STV0672로 CIF까지 최대 30 프레임 (fps), VGA 프레임은 15fps까지 가능합니다. STV0676은 최대 30fps VGA를 처리 할 수 있는 향상된 버전입니다. 두 코-프로세서는 두 개의 CMOS 센서 (vvl6410 CIF 센서 및 vvl6500 VGA 센서)에 연결할 수 있습니다. 이를 410 및 500 센서 또는 CIF 및 VGA 센서라고 합니다.
 
The two chipsets operate almost identically.  The core is an 8051 processor, running two different versions of firmware.  The 672 runs the VP4 video processor code, the 676 runs VP5.  There are a few differences in register mappings for the two chips.  In these cases, the symbols defined in the header files are marked with VP4 or VP5 as part of the symbol name.
두 개의 칩셋은 거의 동일하게 작동합니다. 코어는 두 가지 버전의 펌웨어를 실행하는 8051 프로세서입니다. 672는 VP4 비디오 프로세서 코드를 실행하고, 676은 VP5를 실행합니다. 두 칩에 대한 레지스터 매핑에는 몇 가지 차이점이 있습니다. 이러한 경우 헤더 파일에 정의 된 기호는 기호 이름의 일부로 VP4 또는 VP5로 표시됩니다.
 
The cameras appear externally as three sets of registers. Setting register values is the only way to control the camera.  Some settings are interdependant, such as the sequence required to power up the camera. I will try to make note of all of these cases.
카메라는 3 세트의 레지스터로 외부에 나타납니다. 레지스터 값을 설정하는 것이 카메라를 제어하는 ​​유일한 방법입니다. 일부 설정은 카메라의 전원을 켜는 데 필요한 순서와 같이 상호 의존적입니다. 나는 이 모든 경우를 기록하려고 노력할 것이다.
 
The register sets are called blocks.  Block 0 is the system block.  This section is always powered on when the camera is plugged in.  It contains registers that control housekeeping functions such as powering up the video processor.  The video processor is the VP block.  These registers control how the video from the sensor is processed.  Examples are timing registers, user mode (vga, qvga), scaling, cropping, framerates, and so on.  The last block is the video compressor (VC).  The video stream sent from the camera is compressed as Motion JPEG (JPEGA).  The VC controls all of the compression parameters.  Looking at the file cpia2_registers.h, you can get a full view of these registers and the possible values for most of them.
레지스터 세트를 블록이라고 합니다. 블록 0은 시스템 블록입니다. 이 섹션은 카메라가 꽂혀있을 때 항상 켜져 있으며 비디오 프로세서의 전원을 켜는 등의 관리 기능을 제어하는 ​​레지스터를 포함합니다. 비디오 프로세서는 VP 블록입니다. 이 레지스터는 센서의 비디오 처리 방법을 제어합니다. 타이밍 레지스터, 사용자 모드 (vga, qvga), 크기 조정, 자르기, 프레임 속도 등이 그 예입니다. 마지막 블록은 비디오 압축기 (VC)입니다. 카메라에서 전송 된 비디오 스트림은 Motion JPEG (JPEGA)로 압축됩니다. VC는 모든 압축 매개 변수를 제어합니다. cpia2_registers.h 파일을 보면 이러한 레지스터와 그 대부분의 가능한 값을 전체적으로 볼 수 있습니다.
 
One or more registers can be set or read by sending a usb control message to the camera.  There are three modes for this.  Block mode requests a number of contiguous registers.  Random mode reads or writes random registers with a tuple structure containing address/value pairs.  The repeat mode is only used by VP4 to load a firmware patch.  It contains a starting address and a sequence of bytes to be written into a gpio port.
USB 제어 메시지를 카메라에 보내서 하나 이상의 레지스터를 설정하거나 읽을 수 있습니다. 이를 위한 세 가지 모드가 있습니다. 
블록 모드는 여러 연속 레지스터를 요청합니다. 
임의 모드는 주소 / 값 쌍을 포함하는 tuple 구조(참고.데이터베이스 용어임)로 임의의 레지스터를 읽거나 씁니다. 
반복 모드는 VP4가 펌웨어 패치를 로드하는 데에만 사용됩니다. gpio 포트에 쓰여지는 시작 주소와 일련의 바이트를 포함합니다.

